@page "/pedido/confirmacao/{id:int}"
@inject NavigationManager Nav

<h3>Pedido confirmado</h3>

<div class="alert alert-success">
    Seu pedido <strong>#@id</strong> foi registrado com sucesso.
</div>

<div class="card p-3 mb-3">
    <h5 class="mb-3">Comprovante de pagamento</h5>
    <div class="row">
        <div class="col-md-8">
            <dl class="row mb-0">
                <dt class="col-sm-4">Número do pedido</dt>
                <dd class="col-sm-8">@id</dd>

                <dt class="col-sm-4">Código do pedido</dt>
                <dd class="col-sm-8">@_codigoPedido</dd>

                <dt class="col-sm-4">Data</dt>
                <dd class="col-sm-8">@_dataLocal.ToString("g")</dd>
            </dl>
        </div>
        <div class="col-md-4 text-end">
            <a class="btn btn-outline-secondary" href="/">Voltar à loja</a>
            <a class="btn btn-primary ms-2" href="/account/orders">Acompanhar pedido</a>
        </div>
    </div>
</div>

@code {
    [Parameter]
    public int id { get; set; }
    private string _codigoPedido = string.Empty;
    private DateTime _dataLocal = DateTime.Now;

    protected override void OnParametersSet()
    {
        _dataLocal = DateTime.Now;
        _codigoPedido = $"SE-{id}-{DateTime.UtcNow:yyyyMMddHHmmss}";
    }
}


